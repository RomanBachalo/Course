@page
@{
    @using System.Reflection

    <html>
    <body>
        <table>
            <tr>
                @foreach (var column in ViewBag.Columns)
                {
                    <th>@column</th>
                }
            </tr>
            @foreach (var info in ViewBag.InfoList)
            {
                <tr onclick="location.href="@ViewBag.Section/@((info.GetType().GetProperties() as PropertyInfo[]).Where(pr => pr.Name.Contains(ViewBag.Section + "Id")).FirstOrDefault().GetValue(info, null))"">
                    @foreach (var prop in info.GetType().GetProperties())
                    {
                        @if (ViewBag.Columns.Contains(prop.Name))
                        {
                            <td>@prop.GetValue(info, null)</td>
                        }
                    }
                </tr>
            }
        </table>
    </body>
</html>
}
